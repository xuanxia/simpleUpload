!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-upload"]=t():e["react-upload"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/components/BaseUpload.js")}({"./src/components/BaseUpload.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n("babel-runtime/regenerator")),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("react"),u=l(a),s=n("./src/utils/index.js");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.handleDeleted=function(e){console.log(e),o.setState({fileList:o.state.fileList.filter(function(t){return e.key!==t.key})})},o.handleSort=function(e,t){var n=Array.from(o.state.fileList),r=n[e];n[e]=n[t],n[t]=r,o.setState({fileList:n})},o.getHandles=function(){return{handleDeleted:o.handleDeleted,handleSort:o.handleSort}},o.handleOnChange=function(){var e=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}(r.default.mark(function e(t){var i,a,u,l,c,f,p;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=o.props,a=i.uploadServerHost,u=i.dealResponse,l=0;case 2:if(!(l<t.length)){e.next=14;break}return c=t[l],e.next=6,(0,s.httpFetch)("jpg",400,400);case 6:return f=e.sent,e.next=9,(0,s.xhrUpload)({file:c,uploadServerHost:a,signatureInfo:f});case 9:p=e.sent,o.setState({fileList:o.state.fileList.concat([Object.assign({},{name:c.name,size:c.size,type:c.type,webkitRelativePath:c.webkitRelativePath},u(p))])});case 11:l++,e.next=2;break;case 14:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),o.onResize=function(e){o.setState({fileInput:{width:e.offsetWidth,height:e.offsetHeight}})},o.state={fileList:(0,s.getInitFileList)(e),fileInput:{width:0,height:0}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.multiple,r=t.UploadedImage,i=t.UploadButton,a=this.state,s=a.fileList,l=a.fileInput;return console.log(s),u.default.createElement("div",{className:"simple-upload-wrapper"},r&&u.default.createElement(r,o({fileList:s},this.props,{handles:this.getHandles()})),i?u.default.createElement(i,{onResize:this.onResize},u.default.createElement("input",{type:"file",accept:"image/*",multiple:n,onChange:function(t){console.log(t),console.log(t.target),console.log(t.target.files),e.handleOnChange(t.target.files)},style:{width:l.width,height:l.height,opacity:0,position:"absolute",top:0,left:0,zIndex:99,cursor:"pointer"}})):u.default.createElement("input",{type:"file",accept:"image/*",multiple:n,onChange:function(t){e.handleOnChange(t.target.files)}}))}}]),t}();c.defaultProps={uploadServerHost:"",downloadServerHost:"",thumbnail:"",multiple:!1,UploadedImage:null,UploadButton:null,value:["test/2018-12-20/21e7f9b0-0426-11e9-b976-3bc8b2c85260_400_400.jpg"],dealResponse:function(e){return e}},t.default=c},"./src/utils/getInitFileList.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.value,n=e.downloadServerHost;return Array.isArray(t)&&t.length?t.map(function(t){return{key:t,url:n+"/"+t,thumbnail:n+"/"+t+e.thumbnail}}):[]}},"./src/utils/httpFetch.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n("babel-runtime/regenerator"));t.default=function(e,t,n,o){var i="https://hp.bncry.cn/util/getAliyunSignature?"+["bizName=test","suffix="+e,"width="+t,"height="+n].join("&");return new Promise(function(e,t){fetch(i).then(function(){var t=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(o,i){try{var a=t[o](i),u=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}(r.default.mark(function t(n){var o,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:o=t.sent,i=o.data,e({key:i.dirPath,policy:i.policy,OSSAccessKeyId:i.OSSAccessKeyId,success_action_status:"200",callback:i.callback,signature:i.signature});case 5:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())})}},"./src/utils/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitFileList=t.xhrUpload=t.httpFetch=void 0;var r=a(n("./src/utils/httpFetch.js")),o=a(n("./src/utils/xhrUpload.js")),i=a(n("./src/utils/getInitFileList.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.httpFetch=r.default,t.xhrUpload=o.default,t.getInitFileList=i.default},"./src/utils/xhrUpload.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.file,n=e.uploadServerHost,r=e.signatureInfo;return new Promise(function(e,o){var i=new FormData;for(var a in r)i.append(a,r[a]);console.log(n),i.append("file",t);var u=new XMLHttpRequest;u.open("post",n,!0),u.onload=function(t){if(t&&t.target&&200===t.target.status)try{e(JSON.parse(t.target.response))}catch(e){o(t.target)}else o(t.target)},u.onerror=function(e){o(e.target)},u.upload.onprogress=function(e){console.log(e)},u.upload.onloadstart=function(){console.log("start")},u.send(i)})}},"babel-runtime/regenerator":function(e,t){e.exports=require("babel-runtime/regenerator")},react:function(e,t){e.exports=require("react")}})});